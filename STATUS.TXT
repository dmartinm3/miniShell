MiniShell – Checklist final
======================================

### Básico: prompt, lectura y líneas vacías
- [OK] Prompt inicial correcto  
  Ejemplo comando: (al arrancar minishell)  
  Salida esperada: aparece `msh> ` y el cursor tras un espacio.[1]

- [OK] Línea vacía solo repite prompt  
  Ejemplo comando: pulsar Enter sin escribir nada.  
  Salida esperada: una nueva línea `msh> ` sin ejecutar nada.[1]

- [OK] Ctrl+D cierra la minishell limpiamente  
  Ejemplo comando: en una línea nueva, pulsar Ctrl+D.
  Salida esperada: minishell termina y vuelve a la shell del sistema, con un salto de línea final.[1]

### Mandatos simples en foreground
- [OK] Mandato simple sin argumentos  
  Ejemplo comando: `ls`  
  Salida esperada: listado de ficheros del directorio actual y luego `msh> `.[1]

- [OK] Mandato simple con argumentos  
  Ejemplo comando: `echo hola mundo`  
  Salida esperada: línea `hola mundo` y luego `msh> `.[1]

- [OK] Mandato con ruta absoluta  
  Ejemplo comando: `/bin/echo OK`  
  Salida esperada: `OK` y luego `msh> `.[1]

### Redirecciones en foreground
- [OK] Redirección de salida `>` en mandato simple  
  Ejemplo comandos:  
  - `echo hola > out.txt`  
  - `cat < out.txt`  
  Salida esperada: `cat` muestra `hola` exactamente.[1]

- [OK] Redirección de entrada `<` solo en primer mandato  
  Ejemplo comandos:  
  - `/usr/bin/printf "a\nb\n" > in.txt`  
  - `wc -l < in.txt`  
  Salida esperada: `2`.[1]

- [APARECEN COMILLAS] Redirección de salida `>` solo en último mandato  
  Ejemplo comandos:  
  - `/usr/bin/printf "hola\n" | tr a-z A-Z > upper.txt`  
  - `cat < upper.txt`  
  Salida esperada: `HOLA` (sin comillas adicionales).[1]

- [OK] Redirección de error `>&` solo en último mandato  
  Ejemplo comandos:  
  - `ls /noexiste >& err.txt`  
  - `cat < err.txt`  
  Salida esperada: línea con el error de `ls` (permite variaciones de sistema), minishell sigue funcionando.[1]

### Pipes en foreground
- [OK] Pipeline de dos mandatos  
  Ejemplo comando: `echo hola | tr a-z A-Z`  
  Salida esperada: `HOLA`.[1]

- [OK] Pipeline de dos mandatos con medición  
  Ejemplo comando: `/usr/bin/printf "a\nb\nc\n" | wc -l`  
  Salida esperada: `3`.[1]

- [OK] Pipeline de más de dos mandatos  
  Ejemplo comando: `seq 1 5 | paste -sd+ - | bc`  
  Salida esperada: `15`.[1]

### Pipes + redirecciones
- [APARECE RARUNO CON COMILLAS] `<` en primer mandato y `>` en último  
  Ejemplo comandos:  
  - `/usr/bin/printf "b\na\nb\n" > in.txt`  
  - `sort < in.txt | uniq -c > out.txt`  
  - `cat out.txt`  
  Salida esperada: recuento correcto, p. ej. `1 a` y `2 b` (según orden del sort).[1]

- [ls: cannot access '/noexiste': No such file or directory] `>&` en último mandato con pipe  
  Ejemplo comandos:
  - `ls /noexiste | tr a-z A-Z >& err_pipe.txt`
  - `cat err_pipe.txt`
  Salida esperada: `err_pipe.txt` contiene el error (posiblemente en mayúsculas si el último lo transforma).[1]

### Comportamiento de background (&)
- [OK] Ejecución en background no bloquea y muestra aviso  
  Ejemplo comando: `sleep 2 &`  
  Salida esperada: línea del tipo `[n] PID en background` y el prompt `msh> ` aparece inmediatamente.[1]

- [OK] Prompt usable mientras hay trabajos en background  
  Ejemplo secuencia:  
  - `sleep 5 &`  
  - inmediatamente después: `echo sigo`  
  Salida esperada: `sigo` aparece sin esperar a que termine `sleep`.[1]

- [OK] jobs muestra trabajos Running  
  Ejemplo secuencia:  
  - `sleep 5 &`  
  - `jobs`  
  Salida esperada: una línea con `[n]    Running    ...sleep 5 &` (formato similar) para el trabajo.[1]

- [OK] jobs actualiza a Done cuando terminan  
  Ejemplo secuencia:  
  - `sleep 2 &`  
  - esperar ~3 segundos  
  - `jobs`  
  Salida esperada: el mismo trabajo marcado como `Done`.[1]

### fg (foreground)
- [OK] fg con índice trae un trabajo  
  Ejemplo secuencia:  
  - `sleep 4 &`
  - `jobs` (anotar índice n)  
  - `fg n`  
  Salida esperada: la shell se bloquea hasta que acaba `sleep 4` y luego muestra `msh> `; no hay segfault.[1]

- [OK] fg sin argumento usa último trabajo  
  Ejemplo secuencia:  
  - `sleep 7 &`
  - `sleep 10 &`
  - `fg`  
  Salida esperada: trae el último lanzado (el de 5 segundos) a foreground y espera a que termine.[1]

- [OK] fg sobre índice inválido muestra error y sigue  
  Ejemplo comando: `fg 999`  
  Salida esperada: mensaje `fg: número de job inválido` y minishell sigue.[1]

- [OK] fg sobre trabajo ya terminado informa y no crashea  
  Ejemplo secuencia:  
  - `sleep 1 &`  
  - esperar 2–3 segundos  
  - `jobs` (ver marcado como Done)  
  - `fg n` (índice de ese trabajo)  
  Salida esperada: mensaje `fg: el trabajo ya ha finalizado` y minishell sigue.[1]

### Manejo de señales
- [OK] Ctrl+C mata solo al proceso en foreground  
  Ejemplo secuencia:  
  - `sleep 10`  
  - pulsar Ctrl+C  
  Salida esperada: se interrumpe `sleep 10`, aparece un salto de línea y luego `msh> `; minishell no termina.[1]

- [OK] Ctrl+C no mata la shell ni el background  
  Ejemplo secuencia:  
  - `sleep 10 &`  
  - pulsar Ctrl+C varias veces  
  - `jobs`  
  Salida esperada: minishell sigue respondiendo y el `sleep 10` sigue en Running en `jobs`.[1]

- [OK] Ctrl+\ no mata la shell  
  Ejemplo: `sleep 10` y pulsar Ctrl+\  
  Salida esperada: el proceso foreground puede terminar según acción por defecto, pero minishell continúa y muestra `msh> `.[1]

### Builtins internos
- [OK] exit sin código sale de la minishell  
  Ejemplo comando: `exit`  
  Salida esperada: termina minishell y vuelve a la shell del sistema.[1]

- [OK] exit con código devuelve ese estado  
  Ejemplo secuencia (desde shell del sistema):  
  - `./myshell`  
  - dentro: `exit 7`  
  - fuera: `echo $?`  
  Salida esperada: `7`.[1]

- [OK] cd a ruta absoluta  
  Ejemplo comando: `cd /`  
  Salida esperada: cambia al raíz y muestra la ruta absoluta de trabajo (por ejemplo `/`).[1]

- [OK] cd a ruta relativa  
  Ejemplo secuencia:  
  - `cd /`  
  - `cd tmp` (si existe)  
  Salida esperada: cwd que termina en `/tmp` (o similar), sin segfault.[1]

- [OK] cd sin argumentos usa HOME  
  Ejemplo comandos:  
  - `cd /`  
  - `cd`  
  Salida esperada: ruta absoluta de HOME, por ejemplo `/home/usuario`.[1]

- [OK] cd a ruta inexistente muestra error legible  
  Ejemplo comando: `cd /ruta/que/no/existe`
  Salida esperada: mensaje `cd: /ruta/que/no/existe: <descripción>` y el directorio actual no cambia.[1]

### Errores y mensajes
- [OK] Mandato no encontrado: mensaje correcto y minishell sigue  
  Ejemplo comando: `comando_que_no_existe_123`  
  Salida esperada: `Mandato: Error. No se encuentra el mandato comando_que_no_existe_123` en stderr; minishell sigue aceptando órdenes.[1]

- [OK] Error de apertura en redirección de entrada  
  Ejemplo comando: `wc -l < nofile.txt`  
  Salida esperada: mensaje de error con `nofile.txt` y descripción; no se cae la minishell.[1]

- [OK] Error de apertura en redirección de salida  
  Ejemplo comando: `echo x > /ruta/que/no/existe/out.txt`  
  Salida esperada: mensaje de error con ruta y descripción; la shell continúa.[1]

### Comportamiento del parser (según librería)
- [OK] Argumentos con espacios conservan contenido  
  Ejemplo comandos:  
  - `echo "hola mundo"`  
  - `echo 'con espacios dentro'`  
  Salida esperada: se muestran las frases con espacios internos correctos (el parser decide si mantiene o quita comillas, pero la minishell no crashea ni rompe argv).[1]

- [OK] Redirecciones con nombres que contienen caracteres especiales (sin espacios)  
  Ejemplo comandos:  
  - `echo hola > fichero_1.txt`  
  - `cat < fichero_1.txt`  
  Salida esperada: `hola`, sin errores de parsing.[1]

### Robustez general
- [OK] Múltiples pipelines seguidos no agotan descriptores  
  Ejemplo: ejecutar en la shell del sistema algo como:  
  `for i in $(seq 1 20); do echo "seq 1 10 | wc -l"; done | ./myshell`  
  Salida esperada: la minishell ejecuta todas las líneas, siempre devuelve `10`, y no se bloquea ni se queda sin FDs.[1]

- [OK] jobs y fg nunca provocan segfault incluso con pocos o muchos trabajos  
  Ejemplo: lanzar varios `sleep 1 &`, ejecutar `jobs` y diferentes `fg n`, incluidos índices inválidos, sin que se caiga minishell.[1]